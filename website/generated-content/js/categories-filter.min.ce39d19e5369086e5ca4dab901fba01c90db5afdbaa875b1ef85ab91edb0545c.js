class CategoriesFilter{constructor(e){var t,n,s,o,i=[{name:"categories",prefix:"category-",buttonClass:"category-button",allSelector:"#selectAllAuthors",attrName:"data-categories"}];this.FILTERS=e&&e.filters?e.filters:i,this.showItemClass=e&&e.showItemClass?e.showItemClass:"tf-show",this.activeButtonClass=e&&e.activeButtonClass?e.activeButtonClass:"active",this.filterItemClass=e&&e.filterItemClass?e.filterItemClass:"tf-filter-item",this.populateCount=!!(e&&e.populateCount)&&e.populateCount,this.setDisabledButtonClass=!!(e&&e.setDisabledButtonClass)&&e.setDisabledButtonClass,this.longList=1,this.numberToView=e&&e.numberToView?e.numberToView:6,this.filterItems=document.getElementsByClassName(this.filterItemClass),this.numberOfItems=0,this.filterValues={};for(t=0;t<this.FILTERS.length;t++){this.FILTERS[t].buttonTotal=document.getElementsByClassName(this.FILTERS[t].buttonClass).length,this.FILTERS[t].selected=[],this.FILTERS[t].values=[],s=document.getElementsByClassName(this.FILTERS[t].buttonClass),this.filterValues[this.FILTERS[t].name]=[];for(n=0;n<s.length;n++)o=s[n].id.replace(this.FILTERS[t].prefix,""),this.filterValues[this.FILTERS[t].name][o]={count:0,selected:0}}this.showCheck(this.FILTERS[0].name,!0)}initFilterCount(e,t){if(t){for(n in e)for(var n,s,o,i,r,c,a=0;a<this.filterItems.length;a++)if(s=this.getAttrs(n,this.filterItems[a]),s!==void 0)for(o=0;o<s.length;o++)e[n][s[o]].count++,e[n][s[o]].selected++}else{r=document.getElementsByClassName(this.showItemClass);for(n in e)for(c in e[n])e[n][c].selected=0;for(o=0;o<r.length;o++)for(n in e)if(s=this.getAttrs(n,r[o]),s!==void 0)for(i=0;i<s.length;i++)e[n][s[i]].selected++}return e}populateCounters(e){if(this.populateCount)for(var n,s,o,i,t=0;t<this.FILTERS.length;t++)if(s=this.FILTERS[t].name,o=this.FILTERS[t].selectedPrefix,o)for(n in e[s])i=document.getElementById(`${o}${n}`),i.textContent=e[s][n].selected,this.setDisabledButtonClass&&(i.textContent==0?this.addClassIfMissing(document.getElementById(this.FILTERS[t].prefix+n),this.setDisabledButtonClass):this.delClassIfPresent(document.getElementById(this.FILTERS[t].prefix+n),this.setDisabledButtonClass))}getAttrs(e,t){if(t.getAttribute("data-"+e))try{var n=t.getAttribute("data-"+e).split(" ").filter(function(e){return e.length>0});return n}catch{return t.getAttribute("data-"+e).filter(function(e){return e.length>0})}}showAll(e){for(var t=0;t<this.FILTERS.length;t++)e?this.FILTERS[t].name===e&&(this.FILTERS[t].selected=[]):this.FILTERS[t].selected=[];this.showCheck(e)}checkFilter(e,t){var n,s=document.querySelector(`#${t}${e}`);this.numberOfItems=0;for(n=0;n<this.FILTERS.length;n++)this.FILTERS[n].prefix===t&&(this.FILTERS[n].selected.indexOf(e)>=0||s.classList.contains(this.activeButtonClass)?(this.FILTERS[n].selected.splice(e,1),this.delClassIfPresent(s,this.activeButtonClass)):(this.FILTERS[n].selected.push(e),this.addClassIfMissing(s,this.activeButtonClass)),this.showCheck(this.FILTERS[n].name));this.checkButton()}checkButton(){var e=document.getElementById("load-button");this.numberOfItems>this.numberToView*this.longList?this.delClassIfPresent(e,this.filterItemClass):this.addClassIfMissing(e,this.filterItemClass)}showMore(){this.longList++,this.numberOfItems=0}resetCount(){this.longList=1}showCheck(e,t){for(var s,o,i,n=0;n<this.FILTERS.length;n++)if(this.FILTERS[n].name===e&&(this.FILTERS[n].selected.length===0||this.FILTERS[n].selected.length===this.FILTERS[n].buttonTotal)){o=document.getElementsByClassName(this.FILTERS[n].buttonClass);for(s=0;s<o.length;s++)this.delClassIfPresent(o[s],this.activeButtonClass)}for(n=0;n<this.filterItems.length;n++){this.delClassIfPresent(this.filterItems[n],this.showItemClass),i=0;for(s=0;s<this.FILTERS.length;s++)this.checkVisibility(this.FILTERS[s].selected,this.filterItems[n].getAttribute(this.FILTERS[s].attrName))&&i++;i===this.FILTERS.length&&(this.filterItems[n].classList.contains(this.showItemClass)||(this.numberOfItems++,this.numberOfItems<=this.numberToView*this.longList&&this.addClassIfMissing(this.filterItems[n],this.showItemClass)))}this.checkButton(),this.checkButtonCounts(t)}checkButtonCounts(e){this.filterValues=this.initFilterCount(this.filterValues,e),this.populateCounters(this.filterValues)}checkVisibility(e,t){if(e.length>0){for(var s,n=0;n<e.length;n++)if(t){{try{s=t.split(" ").filter(function(e){return e.length>0})}catch{s=t.filter(function(e){return e.length>0})}if(s.indexOf(e[n])>=0)return!0}}else return!1;return!1}return!0}addClassIfMissing(e,t){e.classList.contains(t)||e.classList.add(t)}delClassIfPresent(e,t){e.classList.contains(t)&&e.classList.remove(t)}}window.CategoriesFilter=CategoriesFilter